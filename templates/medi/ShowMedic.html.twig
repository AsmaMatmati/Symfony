{% extends "base.html.twig" %}
{% block title %}   Liste  {% endblock %}
{% block content %}
    <script src="{{ asset("https://kit.fontawesome.com/ae15aac6fb.js") }}" crossorigin="anonymous"></script>





{% for message in app.flashes('info') %}
    <div class="alert alert-success">
        {{ message }}
    </div>
{% endfor %}

    {% for message in app.flashes('infos') %}
        <div class="alert alert-danger">
            {{ message }}
        </div>
    {% endfor %}

<div class="container">
    <div class="row">
        <div class="col align-self-center">

            <div class="col-xs-offset-2 col-xs-8">
             <center> <input type="text" name="myInput" id="myInput" style="width: 95%" onkeyup="myFunction()" placeholder="Search here" title="Recherche par nom" class="form-control">
             </center>
            </div>
            <br><br>


            <a href="{{ path('AddMedicament') }}" class=pull-right >+Ajouter Médicament</a>

            <ul class="list-unstyled">
                <li><a href="#exampleDropdown" aria-expanded="false" data-toggle="collapse"> Trier Par: </a>
                    <ul id="exampleDropdown" class="collapse list-unstyled ">
                        <li><a href="{{ path('ListMedicByNameASC') }}"> Ordre Alphabétique (ASC)   <i class="fas fa-sort-alpha-up"></i> </a></li>
                        <li><a href="{{ path('ListMedicByNameDESC') }}"> Ordre Alphabétique (DESC)   <i class="fas fa-sort-alpha-down-alt"></i> </a></li>
                        <li><a href="{{ path('ListMedicByPriceASC') }}">   Prix (ASC)  <i class="fas fa-dollar-sign"><i class="fas fa-arrow-up"></i></i> </a></li>
                        <li><a href="{{ path('ListMedicByPriceDESC') }}">   Prix (DESC) <i class="fas fa-dollar-sign"><i class="fas fa-long-arrow-alt-down"></i></i> </a></li>
                        <li><a href="{{ path('ListMedicByStockASC') }}">   Stock (ASC)  <i class="fas fa-sort-amount-up-alt"></i> </a></li>
                        <li><a href="{{ path('ListMedicByStockDESC') }}">   Stock (DESC) <i class="fas fa-sort-amount-down"></i> </a></li>
                    </ul>
                </li>
            </ul>

 <section class="tables">
     <div class="container-fluid">
          <div class="row">
               <!-- Form Elements -->
                 <div class="col-lg-12">
                   <div class="card">
                   <div class="card-header d-flex align-items-center">
                   <h3 class="h4">Liste des Médicaments</h3>
                   </div>
 <div class="card-body">
 <div class="table-responsive">

   <table class="table table-striped table-hover" id="dataTables-example">
          <thead>
        <tr>
            <th>Id</th>
            <th>Code</th>
            <th>Nom</th>
            <th>Prix</th>
            <th>Stock</th>
            <th >Actions</th>
        </tr>
        </thead>
        <tbody> <!-- table body -->
        {% for i in medic %}
            <tr>
                <td> {{ i.id}}</td>
                <td >{{ i.code }}</td>
                <td>{{ i.name }}</td>
                <td>{{ i.prix }}</td>
                <td>{{ i.stock }}</td>

                <td>
                    <a href="{{ path('editmed',{'id':i.id}) }}"> <i class="fas fa-pen"></i> </a>
                |
                <a href="{{ path('remove_medicament',{'id':i.id}) }}
              "onclick="return confirm('Vous-étes sûr de supprimer ce médicament?');"><i class="fas fa-trash"></i></a> </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
        </div>
            </div>
               </div>
              </div>
        </div>
    </div>
</section>

    <br> <br> <br> <br>
    <script>
        function myFunction() {
            console.log("trr");
            // Declare variables
            var input, filter, table, tr, td, i, txtValue;
            input = document.getElementById("myInput");
            filter = input.value.toUpperCase();
            table = document.getElementById("dataTables-example");
            tr = table.getElementsByTagName("tr");

            // Parcourez toutes les lignes de la table et masquez celles qui
            // ne correspondent pas à la requête de recherche
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[2];
                if (td) {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }
    </script>
        </div>
    </div>
        </div>

            <br> <br> <br> <br>

            {% endblock  %}
